var HotPlate=(()=>{var _=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),w=_((G,I)=>{I.exports=LiveJs});const g="hp-";var f={debounce(e,t=0){let o=null;return function(){const r=()=>e.apply(this,arguments);o&&clearTimeout(o),o=setTimeout(r,t)}},getShadow(e){const t=document.createElement("div");return t.innerHTML=e,t},addId(e){const t=[...e.attributes].find(c=>c.name.startsWith(g));if(t)return t.name.replace(g,"");const o=Date.now(),r=Math.round(Math.random()*(9999999999999-o)+o).toString(36);return e.setAttribute(`${g}${r}`,""),r},wrap(e){const t=document.createElement("span"),o=this.addId(t);return e.parentNode.insertBefore(t,e),t.append(e),o},findId(e,t,o=!0){const r=`[${g}${t}]`;return o?e.querySelector(r):e.querySelectorAll(r)}},E={create(e,t){let o=[];const r=f.debounce(()=>{t(o),o=[]},10),c=s=>{o.includes(s)||o.push(s),r(o)};function i(s,a=[]){return new Proxy(s,{get:function(h,l){const n=Reflect.get(...arguments);return n&&typeof n=="object"&&["Array","Object"].includes(n.constructor.name)?i(n,a.concat(l)):n},set:function(h,l,n){const u=Reflect.set(...arguments),p=a.concat(l).join(".");return c(p),u},deleteProperty:function(h,l){const n=Reflect.deleteProperty(...arguments),u=a.concat(l).join(".");return c(u),n}})}return i(e)}};const T={text(e,t){e.innerText=t.innerText},value(e,t){t.value?e.value=t.value:e.value=""}};function b(e,t,o){console.groupCollapsed("updates"),Object.entries(t).forEach(([r,c])=>{const i=f.findId(e,r,!0),s=f.findId(document,r,!0);s&&i&&c.forEach(a=>{o&&console.log("setting",a,s),a in T?T[a](s,i):s.setAttribute(a,i.getAttribute(a))})}),console.groupEnd()}const D=["TEXTAREA"];function A(e,t,o){function r(n){return n=n||[],n.map(u=>u.replace(t.outlet,(p,d)=>d))}function c(n){const u=f.addId(n),p=Array.from(n.attributes).reduce((d,m)=>{const{name:x,value:y}=m,j=r(m.value.match(t.outlet));return j.length&&(d[x]=j),d},{});Object.keys(p).length&&Object.entries(p).forEach(([d,m])=>o.addProp(u,d,m))}function i(n){const u=n.parentElement,p=n.textContent.match(t.outlet);if(p&&p.length){const d=r(p);if(u&&D.includes(u.tagName)){const m=f.addId(u);o.addProp(m,"value",d)}else{const m=f.wrap(n);o.addProp(m,"text",d)}}else{const d=n.textContent.match(t.iterate);if(d&&d.length){const m=n.parentNode;d.forEach(x=>{n.parentNode.setAttribute("hp-iterate",Array.from(d).map(y=>y.replace(t.iterate,(j,N)=>N)).join(","))})}}}function s(n){n.nodeType===Node.TEXT_NODE?i(n):c(n),Array.from(n.childNodes).forEach(s)}const a=f.getShadow(e),h=t.cleanup||[];Array.from(a.childNodes).forEach(s);let l=a.innerHTML;return h.forEach(({search:n,replace:u})=>{l=l.replace(n,u)}),l}var v={outlet:/<%=\s*([^<% ]+)\s*%>/gm,iterate:/<%\s*(.*).forEach\s*\(/gm,cleanup:[{search:/%&gt;/g,replace:"%>"},{search:/&lt;%/g,replace:"<%"},{search:/=&gt;/g,replace:"=>"}]},P={create(){const e={};return{stash:e,addProp(t,o,r){const c=e[t];c?c[o]=r:e[t]={[o]:r}},find(t){return Object.entries(e).reduce((o,[r,c])=>{const i=Object.keys(c).filter(s=>t.some(a=>c[s].includes(a)));return i.length&&(o[r]=i),o},{})}}}},W={parsers:{ejs:v},app({template:e,data:t,parser:o,render:r,trace:c}){const i=P.create(),s=A(e,o,i),a=E.create(t,function(h){const l=f.getShadow(r(s,a)),n=i.find(h),u=new Date().getTime();if(c&&(console.group("changed:",h),console.log("needs patched:",n),console.log("vDom:",l)),b(l,n,c),c){const p=new Date().getTime();console.log("re-render took:",p-u,"ms"),console.groupEnd()}});return c&&console.log(i.stash),{data:a,template:s,store:i}}};return w();})();
//# sourceMappingURL=hot-plate.iife.min.js.map
